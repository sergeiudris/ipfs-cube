#!/bin/bash

clean(){
    rm -rf resources/public/js-out out
}

purge(){
    clean
    rm -rf  .shadow-cljs .cpcache 
}

shadow(){
    ./node_modules/.bin/shadow-cljs "$@"
}

server(){
    shadow -A:dev server
    # yarn server
}

dev(){

    npm i
    shadow -A:dev:app:ui watch :app  # :ui 

}

compile(){
    npm i
    shadow -A:dev:app:ui compile  :ui
}

release(){
    npm i
    # export SHADOW_OUTPUT_DIR="/ctx/ipfs-cube/bin/daemon/resources/public/js-out"
    shadow -A:dev:ui:app release :ui :app
}

tree(){
    clojure -A:dev -Stree
}



cljs_compile(){
    clj -A:dev -m cljs.main -co cljs-build.edn -c
    #  clj -A:dev -m cljs.main -co cljs-build.edn -v -c # -r
}


"$@"